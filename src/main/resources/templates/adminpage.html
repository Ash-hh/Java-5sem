<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/css/adminpageStyle.css}">
    <script th:src="@{../../js/admin.js}"></script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body  th:attr="onload=|showTable('${tables.tableName}')|">
    <header>
        <div>
            <a th:href="@{/}">Main Page</a>
        </div>
        <div>
            <button onclick="showTable('UsersInfo')">Users</button>
            <button onclick="showTable('CarsInfo')">Cars</button>
            <button onclick="showTable('OrdersInfo')">Orders</button>
            <button onclick="showTable('UsersInfo')">Types</button>
            <button onclick="PopUpShow()">Add Car</button>
        </div>
    </header>
    <div class="popUp" id="popUpEdit">
        <div class="popUp_content" id="popUp_content">
            <form name="CarEditForm">
                <p>
                    Car Name
                </p>
                <input type="text" name="CarName">
                <p>
                    Cost per day
                </p>
                <input type="number" name="CarCost">
                <p>
                    Car type
                </p>
                <select  name="type">
                    <option th:each="type : ${tables.type}" th:value="${type}" th:name="${type}" th:text="${type}"></option>
                </select>
            </form>
            <button onclick="EditCar()">Edit</button>
            <button onclick="PopUpHide()">Close</button>
        </div>
    </div>
    <div class="popUp" id="popUpAdd">
        <div class="popUp_content">
            <form name="CarAddForm">
                <p>
                    Car Name
                </p>
                <input type="text" name="CarName">
                <p>
                    Cost per day
                </p>
                <input type="number" name="CarCost">
                <p>
                    Car type
                </p>
                <select  name="type">
                    <option th:each="type : ${tables.type}" th:value="${type}" th:name="${type}" th:text="${type}"></option>
                </select>
                <p>
                    <input type="file" name="image" >
                </p>
            </form>
            <button onclick="carAdd()">Add</button>
            <button onclick="PopUpHide()">Close</button>
        </div>
    </div>
    <div>
        <div id="UsersInfo">
            <table>
                <tr>
                    <td>
                        <h3>Login</h3>
                    </td>
                    <td>
                        <h3>Name</h3>
                    </td>
                    <td>
                        <h3>Surname</h3>
                    </td>
                    <td>
                        <h3>email</h3>
                    </td>
                    <td>
                        <h3>Activity</h3>
                    </td>
                    <td>
                        <h3>Role</h3>
                    </td>
                </tr>
                <tr th:each="user : ${tables.allUsers}">
                    <td th:text="${user.login}"></td>
                    <td th:text="${user.name}"></td>
                    <td th:text="${user.surname}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${user.isActive ? 'Active' : 'Not Active'}"></td>
                    <td th:text="${user.userRole.id == 2 ? 'User' : 'Admin'}"></td>
                    <td><button th:attr="onclick=|DeleteUser(${user.user_id})|">Delete User</button></td>
                    <td><button th:attr="onclick=|ChangeActivity(${user.user_id},${user.active})|">Change Activity</button></td>
                    <td><button th:attr="onclick=|ChangeRole(${user.user_id},'${user.userRole.name}')|">Change privileges </button></td>
                </tr>
            </table>
        </div>
        <div id="CarsInfo">
            <table >
                <tr>
                    <td><h3>Car Name</h3></td>
                    <td><h3>Cost per day</h3></td>
                    <td><h3>Type</h3></td>

                </tr>
                <tr th:each="car : ${tables.allCars}">
                    <td th:text="${car.carName}"></td>
                    <td th:text="${car.costPerDay}"></td>
                    <td th:text="${car.type}"></td>
                    <td><button th:attr="onclick=|DeleteCar(${car.car_id})|">Delete Car</button></td>
                    <td><button th:attr="onclick=|PopUpShow(${car.car_id},'${car.carName}','${car.type}',${car.costPerDay})|">Edit Car</button></td>
                </tr>

            </table>
        </div>
        <div id="OrdersInfo">
            <table>
                <tr>
                    <td><h3>Status</h3></td>
                    <td><h3>Name</h3></td>
                    <td><h3>Surname</h3></td>
                    <td><h3>Car Name</h3></td>
                    <td><h3>Type</h3></td>
                    <td><h3>Cost per day</h3></td>
                    <td><h3>Rent start</h3></td>
                    <td><h3>Rent end</h3></td>
                    <td><h3>Sum cost</h3></td>
                </tr>
                <tr th:each="order : ${tables.allOrder}">
                    <td th:text="${order.status}"></td>
                    <td th:text="${order.user.name}"></td>
                    <td th:text="${order.user.surname}"></td>
                    <td th:text="${order.car.carName}"></td>
                    <td th:text="${order.car.type}"></td>
                    <td th:text="${order.car.costPerDay}"></td>
                    <td th:text="${order.dateStart}"></td>
                    <td th:text="${order.dateEnd}"></td>
                    <td th:text="${order.sumrentcost}"></td>
                    <td th:if="${order.status.toString() == 'Active'}" th:attr="onclick=|EndRent(${order.order_id})|"><button>End Rent</button></td>
                    <td th:if="${order.status.toString() == 'Deleted'}" th:attr="onclick=|DeleteOrder(${order.order_id})|"><button>Delete Order</button></td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>